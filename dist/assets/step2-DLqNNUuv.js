import{d as h,r as u,a as k,o as C,n as V,p as o,b as l,x as i,q as I,k as S,z as y,M as B,D as _,N,v as F,E as q,G as w,H as z,_ as D}from"./index-DizytlvP.js";const G={style:{margin:"16px"}},T=h({__name:"step2",setup(E){const m=y(),s=u(""),p=k(()=>s.value.length!=5),t=u(10),n=u("发送验证码");let d=!1;function v(){if(d==!0)return;d=!0,B({tel:localStorage.getItem("tel")||""}).then(e=>{e.data&&_("验证码发送成功:"+e.data)});const a=setInterval(()=>{d=!1,t.value--,n.value=t.value+"s 后获取",t.value==0&&(t.value=10,n.value="重新获取",clearInterval(a))},1e3)}function c(){N({tel:localStorage.getItem("tel")||"",telcode:s.value}).then(a=>{a.data.code==200?m.push("/register/step3"):_(a.data.message)})}return(a,e)=>{const r=F,f=q,g=w,b=z;return C(),V(b,{onSubmit:c},{default:o(()=>[l(g,{inset:""},{default:o(()=>[l(f,{style:{height:"60px"},modelValue:s.value,"onUpdate:modelValue":e[0]||(e[0]=x=>s.value=x),name:"验证码",label:"验证码",placeholder:"请输入验证码",rules:[{required:!0,message:"请填写验证码"}]},{button:o(()=>[l(r,{disabled:t.value<10,class:"send-code",onClick:v,size:"mini"},{default:o(()=>[i(I(n.value),1)]),_:1},8,["disabled"])]),_:1},8,["modelValue"])]),_:1}),S("div",G,[l(r,{onClick:c,disabled:p.value,round:"",block:"",color:"#f66","native-type":"submit"},{default:o(()=>e[1]||(e[1]=[i(" 下一步 ")])),_:1},8,["disabled"])])]),_:1})}}}),M=D(T,[["__scopeId","data-v-56999270"]]);export{M as default};
